<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Heliconias Report ‚Äî Inicio de sesi√≥n</title>

    <!-- Estilos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      
      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        position: relative;
        overflow-y: auto;
         overflow-x: hidden; /* Esto elimina la barra horizontal */
      }

      body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: 
            linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)),
            url("img/fongo.JPG");
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        z-index: -1;
      }
      /* Header Styles */
      .header {
        background: linear-gradient(135deg, #ffffff, #ffffff);
        color: #2e7d32;
        padding: 15px 30px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        position: sticky;
        top: 0;
        z-index: 100;
      }

      .top-section {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
      }

      .logo {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .logo-img {
        width: 50px;
        height: 50px;
        background: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .logo-img i {
        display: inline-block;      /* Necesario para que tome ancho/alto */
        width: 50px;                /* Ajusta el tama√±o */
        height: 50px;
        background-image: url("img/logo.png");
        background-size: contain;   /* Ajusta la imagen al espacio */
        background-repeat: no-repeat;
        background-position: center;
        color: transparent;         /* Oculta el √≠cono */
        font-size: 0;               /* Otra forma de ocultarlo */
      }

      .logo h1 {
        font-size: 24px;
        font-weight: 700;
        margin: 0;
      }

      .system-date {
        display: flex;
        align-items: center;
        gap: 10px;
        font-weight: 500;
        background: rgba(255,255,255,0.2);
        padding: 8px 15px;
        border-radius: 20px;
      }

      /* Navigation Styles */
      .nav-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-top: 10px;
        border-top: 1px solid rgba(255,255,255,0.3);
      }

      .main-nav {
        display: flex;
        gap: 5px;
      }

      .nav-item {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 10px 20px;
        color: #2e7d32;
        text-decoration: none;
        border-radius: 6px;
        transition: all 0.3s ease;
        background: transparent; /* Quitamos el fondo */
        position: relative;
      }

      /* L√≠nea debajo del texto */
      .nav-item::after {
          content: '';
          position: absolute;
          left: 0;
          bottom: 0;       /* justo debajo del texto */
          width: 0%;       /* empieza invisible */
          height: 2px;     /* grosor de la l√≠nea */
          background-color: currentColor; /* toma el color del texto */
          transition: width 0.3s ease;
      }

      /* Hover: la l√≠nea se extiende */
      .nav-item:hover::after {
          width: 100%;
      }

      /* Mantener activo si quieres una l√≠nea permanente */
      .nav-item.active::after {
          width: 100%;
      }

      .btn {
        padding: 8px 16px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-weight: 500;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        transition: all 0.3s ease;
        position: relative;
      }

      /* L√≠nea debajo del texto */
      .btn::after {
        content: '';
        position: absolute;
        left: 0;
        bottom: -2px; /* un poquito debajo del texto */
        width: 0%;
        height: 2px;
        background-color: currentColor; /* la l√≠nea toma el color del texto */
        transition: width 0.3s ease;
      }

      /* Hover: aparece la l√≠nea */
      .btn:hover::after {
        width: 100%;
      }

  

      .btn-help {
        background: rgba(255,255,255,0.2);
        color: #2e7d32;
      }


      /* Main Container */
      .main-container {
        flex: 1;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        padding: 40px 20px;
        min-height: calc(100vh - 150px);
      }

      /* Login Box */
      .login-box {
          background: rgba(255, 255, 255, 0.902); /* menos opaco, m√°s transparente */
          border-radius: 12px;
          box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
          padding: 40px;
          width: 100%;
          max-width: 450px;
          margin-top: 20px;
      }

      .login-box h2 {
        text-align: center;
        margin-bottom: 30px;
        color: #2c3e50;
        font-size: 28px;
        font-weight: 600;
      }

      .login-box fieldset {
        border: none;
        padding: 0;
      }

      .login-box label {
        display: block;
        margin-bottom: 8px;
        font-weight: 500;
        color: #2e7d32;
      }

      .login-box input {
        width: 100%;
        padding: 14px;
        margin-bottom: 20px;
        border: 1px solid #ddd;
        border-radius: 8px;
        font-size: 16px;
        transition: border-color 0.3s;
      }

      .login-box input:focus {
        outline: none;
        border-color:  #4caf50;
        box-shadow: 0 0 0 2px rgba(39, 174, 96, 0.2);
      }
      
      .login-box h2 {
        font-size: 28px;
        font-weight: 700;
        color: #2e7d32; /* Aqu√≠ cambias el color del t√≠tulo */
      }

      .password-container {
        position: relative;
      }

      .botones {
        margin-top: 25px;
      }

      .botones button {
        width: 100%;
        padding: 14px;
        background: linear-gradient(135deg, #2e7d32, #2e7d32);
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
      }

      .botones button:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(39, 174, 96, 0.4);
      }

      .forgot-password {
        text-align: center;
        margin-top: 20px;
      }

      .forgot-password a {
        color: #2e7d32;
        text-decoration: none;
        font-weight: 500;
        transition: color 0.3s;
      }

      .forgot-password a:hover {
        color: #2e7d32;
        text-decoration: underline;
      }

      /* Contenido adicional para hacer scroll */
      .additional-content {
        padding: 40px 20px;
        max-width: 800px;
        margin: 0 auto;
        color: #2c3e50;
      }

      .additional-content h3 {
        margin-bottom: 20px;
        color: #27ae60;
      }

      .additional-content p {
        margin-bottom: 15px;
        line-height: 1.6;
      }

      /* Estilos para ocultar scrollbars en todos los navegadores */
      .swal2-popup::-webkit-scrollbar {
        display: none;
      }
      
      .swal2-popup {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }

      /* Tooltip Styles */
      .tooltip {
        position: relative;
        display: inline-block;
      }

      .tooltip .tooltiptext {
        visibility: hidden;
        width: 200px;
        background-color: #2c3e50;
        color: white;
        text-align: center;
        border-radius: 6px;
        padding: 8px 12px;
        position: absolute;
        z-index: 1000;
        bottom: 125%;
        left: 50%;
        transform: translateX(-50%);
        opacity: 0;
        transition: opacity 0.3s;
        font-size: 14px;
        font-weight: normal;
        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      }

      .tooltip .tooltiptext::after {
        content: "";
        position: absolute;
        top: 100%;
        left: 50%;
        margin-left: -5px;
        border-width: 5px;
        border-style: solid;
        border-color: #2c3e50 transparent transparent transparent;
      }

      .tooltip:hover .tooltiptext {
        visibility: visible;
        opacity: 1;
      }

      /* Tooltip para campos de entrada */
      .input-tooltip {
        position: relative;
        width: 100%;
      }

      .input-tooltip .tooltiptext {
        width: 250px;
        bottom: 100%;
        left: 0;
        transform: none;
      }

      .input-tooltip .tooltiptext::after {
        left: 20px;
      }

      /* Estilos personalizados para SweetAlert */
      .swal2-container .swal2-popup {
        background: white !important;
        color: #2c3e50 !important;
        border-radius: 12px !important;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3) !important;
      }

      .swal2-title {
        color: #2c3e50 !important;
        font-size: 24px !important;
        font-weight: 600 !important;
      }

      .swal2-html-container {
        color: #2c3e50 !important;
        font-size: 16px !important;
      }

      .swal2-confirm {
        background: linear-gradient(135deg, #27ae60, #2ecc71) !important;
        border: none !important;
        border-radius: 8px !important;
        padding: 12px 24px !important;
        font-size: 16px !important;
        font-weight: 600 !important;
      }

      /* Estilo espec√≠fico para el loading */
      .swal2-loading .swal2-title {
        color: #27ae60 !important;
        font-size: 22px !important;
      }
    </style>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
      const supabaseUrl = 'https://umncnddwzmjxgmvisvqz.supabase.co';
      const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVtbmNuZGR3em1qeGdtdmlzdnF6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI1NDIyNzksImV4cCI6MjA3ODExODI3OX0.ODvus28cTCTD8gGewQ2sAZ8PcXbEe4CIy_zv6bip8J0';
      const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);
    </script>
  </head>
  <body>
    <!-- Header Styles -->
    <header class="header">
      <div class="top-section">
        <div class="logo">
          <div class="logo-img">
            <i class="fas fa-leaf"></i>
          </div>
          <h1>Heliconias Reports</h1>
        </div>
        <div class="system-date">
          <i class="fas fa-calendar-alt"></i>
          <span id="current-date"></span>
        </div>
      </div>

      <div class="nav-container">
        <div class="main-nav">
          <!-- Los elementos de navegaci√≥n se han movido a la derecha -->
        </div>
        <div class="user-actions">
          <a href="#" class="nav-item active tooltip">
            <i class="fas fa-home"></i>
            <span>Inicio</span>
            <span class="tooltiptext">Volver a la p√°gina principal del sistema</span>
          </a>
          <a href="#" class="nav-item tooltip">
            <i class="fas fa-headset"></i>
            <span>Soporte</span>
            <span class="tooltiptext">Contactar al equipo de soporte t√©cnico</span>
          </a>
          <button id="help-btn" class="btn btn-help tooltip">
            <i class="fas fa-question-circle"></i>
            <span>Ayuda</span>
            <span class="tooltiptext">Ver informaci√≥n de ayuda sobre el sistema</span>
          </button>
        </div>
      </div>
    </header>

    <main class="main-container">
      <section class="login-box">
        <h2>Inicio de sesi√≥n</h2>
        <form id="loginForm">
          <fieldset>
            <div class="input-tooltip">
              <label for="nombre" class="tooltip">
                Usuario (Nombre)
                <span class="tooltiptext">Ingresa tu nombre de usuario registrado en el sistema</span>
              </label>
              <input
                type="text"
                id="nombre"
                name="nombre"
                placeholder="Tu nombre de usuario"
                required
                class="tooltip"
                title="Ejemplo: juan.perez o usuario123"
              />
            </div>

            <div class="input-tooltip">
<label for="documento" class="tooltip">
    Contrase√±a
    <span class="tooltiptext">Ingresa tu contrase√±a de acceso al sistema</span>
</label>
<div class="password-container">
    <input
        type="password"
        id="documento"
        name="documento"
        placeholder="Tu contrase√±a"
        required
        class="tooltip"
        title="Ingresa la contrase√±a que configuraste"
    />
</div>
            </div>

            <div class="botones">
              <button type="submit" class="tooltip" title="Haz clic para iniciar sesi√≥n en el sistema">
                Iniciar sesi√≥n
              </button>
            </div>

            <p class="forgot-password">
  <a href="contrase√±a.html" class="tooltip" title="Recuperar acceso si olvidaste tu documento">
    ¬øOlvidaste tu Contrase√±a?
  </a>
  <br>
  <a href="registrarce.html" class="tooltip" style="margin-top: 10px; display: inline-block;" title="Crear una nueva cuenta en el sistema">
    ¬øNo tienes cuenta? Reg√≠strate aqu√≠
  </a>
</p>

          </fieldset>
        </form>
      </section>
    </main>

    <script>
      // Mostrar fecha actual
      const currentDateElement = document.getElementById('current-date');
      const now = new Date();
      const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      currentDateElement.textContent = now.toLocaleDateString('es-ES', options);

      // Bot√≥n de ayuda del header con SweetAlert
      document.getElementById('help-btn').addEventListener('click', function(e) {
        e.preventDefault();
        Swal.fire({
          title: 'Heliconias Reports - Ayuda',
          html: `
            <div style="text-align: left;">
              <div style="background: linear-gradient(135deg, #27ae60, #2ecc71); color: white; padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                <h4 style="margin: 0;">
                  Bienvenido a Heliconias Reports
                </h4>
              </div>
              
              <p style="margin-bottom: 20px; color: #2c3e50; line-height: 1.6;">
                Nuestra plataforma est√° dise√±ada para ofrecerte informes detallados y an√°lisis completos sobre el cultivo y producci√≥n de heliconias.
              </p>

              <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #27ae60;">
                <h5 style="margin: 0 0 15px 0; color: #2c3e50;">
                  Caracter√≠sticas principales
                </h5>
                <div style="display: grid; gap: 10px;">
                  <div style="display: flex; align-items: start; gap: 10px;">
                    <i class="fas fa-check-circle" style="color: #27ae60; margin-top: 2px;"></i>
                    <span style="color: #2c3e50;">Gesti√≥n de inventarios de heliconias</span>
                  </div>
                  <div style="display: flex; align-items: start; gap: 10px;">
                    <i class="fas fa-check-circle" style="color: #27ae60; margin-top: 2px;"></i>
                    <span style="color: #2c3e50;">Seguimiento de producci√≥n y cosechas</span>
                  </div>
                  <div style="display: flex; align-items: start; gap: 10px;">
                    <i class="fas fa-check-circle" style="color: #27ae60; margin-top: 2px;"></i>
                    <span style="color: #2c3e50;">An√°lisis de rendimiento por variedad</span>
                  </div>
                  <div style="display: flex; align-items: start; gap: 10px;">
                    <i class="fas fa-check-circle" style="color: #27ae60; margin-top: 2px;"></i>
                    <span style="color: #2c3e50;">Reportes personalizados para toma de decisiones</span>
                  </div>
                </div>
              </div>

              <div style="background: linear-gradient(135deg, #ffeaa7, #fab1a0); padding: 15px; border-radius: 10px; border-left: 4px solid #e17055;">
                <h5 style="margin: 0 0 10px 0; color: #2d3436;">
                  ¬øNecesitas ayuda?
                </h5>
                
                <p style="margin: 0; color: #2d3436; line-height: 1.5;">
                  Tambi√©n puedes contactar a nuestro equipo de soporte a trav√©s de la secci√≥n de contacto en la parte superior de la p√°gina.
                </p>
              </div>
            </div>
          `,
          showCloseButton: true,
          confirmButtonColor: '#27ae60',
          confirmButtonText: '<i class="fas fa-check-circle"></i> Entendido',
          width: 600,
          background: '#ffffff',
          customClass: {
            popup: 'swal2-popup',
            confirmButton: 'help-swal-confirm-btn'
          },
          showClass: {
            popup: 'animate__animated animate__fadeInDown'
          },
          hideClass: {
            popup: 'animate__animated animate__fadeOutUp'
          }
        });
      });

      // Funci√≥n para crear/sincronizar todos los usuarios en Supabase Auth
async function crearUsuariosEnAuth() {
    const loadingAlert = Swal.fire({
        title: '<div style="color: #3498db; font-size: 22px; font-weight: 600;">CREANDO USUARIOS</div>',
        html: '<div style="color: #2c3e50; font-size: 16px; margin-top: 10px;">Sincronizando usuarios con el sistema de autenticaci√≥n...</div>',
        icon: 'info',
        showConfirmButton: false,
        allowOutsideClick: false,
        background: 'white',
        didOpen: () => { Swal.showLoading(); }
    });

    try {
        console.log('üìã OBteniendo usuarios de la tabla...');
        
        // Obtener todos los usuarios de tu tabla
        const { data: usuarios, error } = await supabase
            .from('usuarios')
            .select('*');
        
        if (error) throw error;
        
        console.log(`üìä Encontrados ${usuarios.length} usuarios`);
        
        let usuariosCreados = 0;
        let usuariosExistentes = 0;
        let errores = 0;
        
        for (const usuario of usuarios) {
            if (usuario.correo && usuario.contrasena) {
                console.log(`üõ†Ô∏è Procesando: ${usuario.correo}`);
                
                try {
                    const { data, error } = await supabase.auth.signUp({
                        email: usuario.correo,
                        password: usuario.contrasena,
                        options: {
                            data: {
                                nombre: usuario.nombre,
                                id_usuario: usuario.id_usuario,
                                documento: usuario.documento
                            }
                        }
                    });
                    
                    if (error) {
                        if (error.message.includes('already registered')) {
                            console.log(`‚úÖ ${usuario.correo} - Ya existe en Auth`);
                            usuariosExistentes++;
                        } else {
                            console.log(`‚ùå ${usuario.correo} - Error:`, error.message);
                            errores++;
                        }
                    } else {
                        console.log(`‚úÖ ${usuario.correo} - Creado exitosamente`);
                        usuariosCreados++;
                    }
                } catch (userError) {
                    console.log(`‚ö†Ô∏è ${usuario.correo} - Error:`, userError.message);
                    errores++;
                }
                
                // Esperar entre registros
                await new Promise(resolve => setTimeout(resolve, 300));
            }
        }
        
        await Swal.close();
        
        // Mostrar resumen
        await Swal.fire({
            title: '<div style="color: #27ae60; font-size: 24px; font-weight: 600;">PROCESO COMPLETADO</div>',
            html: `
                <div style="text-align: left; color: #2c3e50; font-size: 14px;">
                    <strong>Resumen de la sincronizaci√≥n:</strong><br><br>
                    <div style="background: #e8f6f3; padding: 10px; border-radius: 5px;">
                        <strong>‚úÖ Usuarios creados:</strong> ${usuariosCreados}<br>
                        <strong>üîµ Usuarios existentes:</strong> ${usuariosExistentes}<br>
                        <strong>‚ùå Errores:</strong> ${errores}<br>
                        <strong>üìä Total procesados:</strong> ${usuarios.length}
                    </div>
                    <br>
                    <small>Ahora puedes usar el login con Supabase Auth</small>
                </div>
            `,
            icon: 'success',
            confirmButtonText: '<i class="fas fa-check"></i> Entendido',
            background: 'white',
            width: '500px'
        });
        
        console.log(`üéâ Proceso completado: ${usuariosCreados} creados, ${usuariosExistentes} existentes, ${errores} errores`);
        
    } catch (error) {
        await Swal.close();
        console.error('‚ùå Error general:', error);
        await Swal.fire({
            title: '<div style="color: #e74c3c; font-size: 24px; font-weight: 600;">ERROR</div>',
            html: `<div style="color: #2c3e50; font-size: 16px; margin-top: 10px;">Error: ${error.message}</div>`,
            icon: 'error',
            confirmButtonText: '<i class="fas fa-check"></i> Entendido',
            background: 'white'
        });
    }
}

// Funci√≥n para ver usuarios en Auth (opcional)
async function verUsuariosAuth() {
    try {
        // Nota: Esta funci√≥n requiere permisos admin, puede que no funcione
        const { data: { users }, error } = await supabase.auth.admin.listUsers();
        
        if (error) throw error;
        
        console.log('üë• Usuarios en Auth:', users);
        return users;
    } catch (error) {
        console.log('No se pueden listar usuarios (permisos insuficientes)');
        return [];
    }
}

// C√≥digo de login FINAL con Supabase Auth
document.getElementById('loginForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const correo = document.getElementById('nombre').value;
    const contrasena = document.getElementById('documento').value;
    
    console.log('üîê INICIANDO SESI√ìN CON AUTH:');
    console.log('Correo:', correo);
    console.log('Contrase√±a:', contrasena);
    
    const loadingAlert = Swal.fire({
        title: '<div style="color: #27ae60; font-size: 22px; font-weight: 600;">INICIANDO SESI√ìN</div>',
        html: '<div style="color: #2c3e50; font-size: 16px; margin-top: 10px;">Validando tus credenciales, por favor espera...</div>',
        icon: 'info',
        showConfirmButton: false,
        allowOutsideClick: false,
        background: 'white',
        didOpen: () => { Swal.showLoading(); }
    });
    
    try {
        console.log('üì° AUTENTICANDO CON SUPABASE AUTH...');
        
        // ‚úÖ Login simple y directo con Auth
        const { data: authData, error: authError } = await supabase.auth.signInWithPassword({
            email: correo,
            password: contrasena
        });

        console.log('üìä RESULTADO AUTH:', authData);
        console.log('ERROR AUTH:', authError);

        if (authError) {
            console.log('‚ùå ERROR EN AUTH:', authError.message);
            throw authError;
        }

        // ‚úÖ LOGIN EXITOSO
        console.log('‚úÖ LOGIN EXITOSO CON AUTH:', authData.user);
        
        // Obtener informaci√≥n adicional de tu tabla usuarios
        const { data: usuarioInfo, error: errorInfo } = await supabase
            .from('usuarios')
            .select('*')
            .eq('correo', correo)
            .single();

        console.log('üìã INFORMACI√ìN ADICIONAL:', usuarioInfo);

        // Actualizar √∫ltimo login en tu tabla
        if (usuarioInfo) {
            await supabase
                .from('usuarios')
                .update({ ultimo_login: new Date().toISOString() })
                .eq('id_usuario', usuarioInfo.id_usuario);
        }

        await Swal.close();
        
        // Mostrar mensaje de bienvenida
        await Swal.fire({
            title: '<div style="color: #27ae60; font-size: 24px; font-weight: 600;">¬°BIENVENIDO!</div>',
            html: `<div style="color: #2c3e50; font-size: 18px; margin-top: 10px;">
                   Hola <strong>${usuarioInfo ? usuarioInfo.nombre : authData.user.email}</strong>, 
                   has iniciado sesi√≥n correctamente.
                   </div>`,
            icon: 'success',
            confirmButtonText: '<i class="fas fa-check-circle"></i> Continuar',
            background: 'white',
            showConfirmButton: true
        });

        // ‚úÖ Redirigir a la p√°gina principal
        console.log('üîÑ Redirigiendo a principal.html...');
        setTimeout(() => {
            window.location.href = 'principal.html';
        }, 1000);
        
    } catch (error) {
        console.error('‚ùå ERROR EN LOGIN:', error);
        await Swal.close();
        
        let mensajeError = 'Error al iniciar sesi√≥n.';
        
        if (error.message.includes('Invalid login credentials')) {
            mensajeError = 'Correo electr√≥nico o contrase√±a incorrectos.';
        } else if (error.message.includes('Email not confirmed')) {
            mensajeError = 'Por favor confirma tu correo electr√≥nico antes de iniciar sesi√≥n.';
        } else if (error.message.includes('Too many requests')) {
            mensajeError = 'Demasiados intentos fallidos. Por favor espera unos minutos.';
        }
        
        await Swal.fire({
            title: '<div style="color: #e74c3c; font-size: 24px; font-weight: 600;">ERROR</div>',
            html: `<div style="color: #2c3e50; font-size: 16px; margin-top: 10px;">${mensajeError}</div>`,
            icon: 'error',
            confirmButtonText: '<i class="fas fa-redo"></i> Intentar de nuevo',
            background: 'white'
        });
    }
});
    </script>
  </body>
</html>